!function(t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():window.KUTE=window.KUTE||t()}(function(){"use strict";for(var t=window,n=t.KUTE={},e=t.tweens=[],i=t.tick=null,r=t.performance,s=(function(){var t=document.createElement("div"),n=0,e=["Moz","moz","Webkit","webkit","O","o","Ms","ms"],i=e.length,r=["MozTransform","mozTransform","WebkitTransform","webkitTransform","OTransform","oTransform","MsTransform","msTransform"];for(n;n<i;n++)if(r[n]in t.style)return e[n];t=null}),a=(function(t){var n=!(t in document.body.style),e=s();return n?e+(t.charAt(0).toUpperCase()+t.slice(1)):t}),u=function(t,n){var e;if(e=n?"object"==typeof t?t:document.querySelectorAll(t):"object"==typeof t?t:/^#/.test(t)?document.getElementById(t.replace("#","")):document.querySelector(t),null===e&&"window"!==t)throw new TypeError("Element not found or incorrect selector: "+t);return e},o=function(t,n){function e(){var e,i=0;for(i;i<s;i++)"string"==typeof t&&t.indexOf(r[i])!==-1&&(e=r[i]);return e=void 0!==e?e:n?"deg":"px"}var i=parseInt(t)||0,r=["px","%","deg","rad","em","rem","vh","vw"],s=r.length,a=e();return{v:i,u:a}},l=function(n){var e,i;if(/rgb|rgba/.test(n))return e=n.replace(/[^\d,]/g,"").split(","),i=e[3]?e[3]:null,i?{r:parseInt(e[0]),g:parseInt(e[1]),b:parseInt(e[2]),a:1*i}:{r:parseInt(e[0]),g:parseInt(e[1]),b:parseInt(e[2])};if(/#/.test(n))return e=h(n),{r:e.r,g:e.g,b:e.b};if(/transparent|none|initial|inherit/.test(n))return{r:0,g:0,b:0,a:0};if(!/#|rgb/.test(n)){var r=document.getElementsByTagName("head")[0];return r.style.color=n,e=t.getComputedStyle(r,null).color,r.style.color="",n!==e?l(e):{r:0,g:0,b:0}}},c=function(t){var n=document.body.getAttribute("data-tweening");n&&"scroll"===n&&t.preventDefault()},f=function(t,n,e){return"#"+((1<<24)+(t<<16)+(n<<8)+e).toString(16).slice(1)},h=function(t){var n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(n,function(t,n,e,i){return n+n+e+e+i+i});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},p=function(t,n){if(t){var e=t.style.cssText,i={},r=e.replace(/\s/g,"").split(";"),s=0,a=r.length;for(s;s<a;s++)if(/transform/.test(r[s])){var u=r[s].split(":")[1].split(")"),o=0,l=u.length;for(o;o<l;o++){var c=u[o].split("(");""!==c[0]&&X.indexOf(c)&&(i[c[0]]=/translate3d/.test(c[0])?c[1].split(","):c[1])}}return i}},v=(function(n,e){var i=n.style,r=t.getComputedStyle(n,null)||n.currentStyle,s=a(e),u=i[e]&&!/auto|initial|none|unset/.test(i[e])?i[e]:r[s];if("transform"!==e&&(s in r||s in i)){if(u){if("filter"===s){var o=parseInt(u.split("=")[1].replace(")","")),l=parseFloat(o/100);return l}return u}return Z[e]}}),d=function(t){if("function"==typeof t)return t;if("string"==typeof t){if(/easing|linear/.test(t))return ut[t];if(/bezier/.test(t)){var e=t.replace(/bezier|\s|\(|\)/g,"").split(",");return n.Ease.Bezier(1*e[0],1*e[1],1*e[2],1*e[3])}return/physics/.test(t)?n.Physics[t]():n.Ease[t]()}},g=("ontouchstart"in t||navigator.msMaxTouchPoints||!1),_=g?"touchstart":"mousewheel",y="mouseenter",m=a("transformOrigin"),I=a("perspective"),w=a("perspectiveOrigin"),O=t._tr=a("transform"),E=t.requestAnimationFrame||t.webkitRequestAnimationFrame||function(t){return setTimeout(t,16)},b=t.cancelAnimationFrame||t.webkitCancelRequestAnimationFrame||function(t){return clearTimeout(t)},T=document.body,x=document.getElementsByTagName("HTML")[0],C=/webkit/i.test(navigator.userAgent)||"BackCompat"==document.compatMode?T:x,S=null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)&&parseFloat(RegExp.$1),M=8===S,k=["color","backgroundColor"],B=["scrollTop","scroll"],Q=["opacity"],Y=["top","left","width","height"],X=["translate3d","translateX","translateY","translateZ","rotate","translate","rotateX","rotateY","rotateZ","skewX","skewY","scale"],P=k.concat(B,Q,Y,X),F=P.length,Z=Z||{},A=0;A<F;A++){var q=P[A];k.indexOf(q)!==-1?Z[q]="rgba(0,0,0,0)":Y.indexOf(q)!==-1?Z[q]=0:"translate3d"===q?Z[q]=[0,0,0]:"translate"===q?Z[q]=[0,0]:"rotate"===q||/X|Y|Z/.test(q)?Z[q]=0:"scale"!==q&&"opacity"!==q||(Z[q]=1)}var z=function(t,n,e){var i=u(t),r=n,s=tt(n,{},i)[0];return e=e||{},e.rpr=!0,new ct(i,r,s,e)},$=function(t,e,i,r){var s=u(t),a=tt(e,i,s),o=a[0],l=a[1];r=r||{};var c=new ct(s,o,l,r);return n.svg&&n.svq(c),c},L=function(t,n,e){var i=u(t,!0);return new ft(i,n,e)},R=function(t,n,e,i){var r=u(t,!0);return new ht(r,n,e,i)},D=t.number=function(t,n,e){return t=+t,n-=t,t+n*e},N=t.unit=function(t,n,e,i){return t=+t,n-=t,t+n*i+e},U=t.color=function(t,n,e,i){var r,s={},a=f,u=")",o=",",l="rgb(",c="rgba(";for(r in n)s[r]="a"!==r?parseInt(D(t[r],n[r],e))||0:t[r]&&n[r]?parseFloat(D(t[r],n[r],e)):null;return i?a(s.r,s.g,s.b):s.a?c+s.r+o+s.g+o+s.b+o+s.a+u:l+s.r+o+s.g+o+s.b+u},j=t.dom={},H=t.ticker=function(t){for(var n=0;n<e.length;)K(e[n],t)?n++:e.splice(n,1);i=E(H)},K=t.update=function(t,n){if(n=n||r.now(),n<t._sT&&t.playing&&!t.paused)return!0;var e,i=Math.min((n-t._sT)/t._dr,1);for(e in t._vE)j[e].call(this,t._el,e,t._vS[e],t._vE[e],t._e(i),t._ops);if(t._uC&&t._uC.call(),1===i){if(t._r>0)return t._r<9999&&t._r--,t._y&&(t.reversed=!t.reversed,t.rvs()),t._sT=t._y&&!t.reversed?n+t._rD:n,!0;t._cC&&t._cC.call(),t.scrollOut();var s=0,a=t._cT.length;for(s;s<a;s++)t._cT[s].start(t._sT+t._dr);return t.close(),!1}return!0},W=function(t,n){void 0!==n._to&&(t.style[m]=n._to),void 0!==n._ppo&&(t.style[w]=n._ppo),void 0!==n._ppp&&(t.parentNode.style[I]=n._ppp+"px"),void 0!==n._pppo&&(t.parentNode.style[w]=n._pppo)},G=function(t){e.push(t)},J=function(t){var n=e.indexOf(t);n!==-1&&e.splice(n,1)},V=function(){i&&b(i),i=null},tt=function(t,e,i){var r,s=arguments.length,a=[];for(s=s>2?2:s,r=0;r<s;r++){var u,o=arguments[r],l={},c={},f={},h={};a[r]={};for(u in o)if(X.indexOf(u)!==-1){if(/^translate(?:[XYZ]|3d)$/.test(u)){var p=["X","Y","Z"],v=0;for(v;v<3;v++){var d=p[v];/3d/.test(u)?f["translate"+d]=st.tf("translate"+d,o[u][v]):f["translate"+d]="translate"+d in o?st.tf("translate"+d,o["translate"+d]):{value:0,unit:"px"}}h.translate=f}else if(/^rotate(?:[XYZ])$|^skew(?:[XY])$/.test(u)){var g=/rotate/.test(u)?"rotate":"skew",_=["X","Y","Z"],y=0,m="rotate"===g?c:l;for(y;y<3;y++){var I=_[y];void 0!==o[g+I]&&"skewZ"!==u&&(m[g+I]=st.tf(g+I,o[g+I]))}h[g]=m}else/(rotate|translate|scale)$/.test(u)&&(h[u]=st.tf(u,o[u]));a[r].transform=h}else"transform"!==u&&(Y.indexOf(u)!==-1?a[r][u]=st.box(u,o[u]):Q.indexOf(u)!==-1||B.indexOf(u)!==-1?a[r][u]=st.unl(u,o[u]):k.indexOf(u)!==-1?a[r][u]=st.cls(u,o[u]):u in n.pp&&(a[r][u]=n.pp[u](u,o[u],i)))}return a},nt=t.translate=function(t,n,e){var i={};for(var r in n){var s=t[r].value||0,a=n[r].value||0,u=n[r].unit||"px";i[r]=s===a?a+u:s+(a-s)*e+u}return n.x?"translate("+i.x+","+i.y+")":"translate3d("+i.translateX+","+i.translateY+","+i.translateZ+")"},et=t.rotate=function(t,n,e){var i={};for(var r in n)if(t[r]){var s=t[r].value,a=n[r].value,u=n[r].unit||"deg",o=s+(a-s)*e;i[r]="z"===r?"rotate("+o+u+")":r+"("+o+u+")"}return n.z?i.z:(i.rotateX||"")+(i.rotateY||"")+(i.rotateZ||"")},it=t.skew=function(t,n,e){var i={};for(var r in n)if(t[r]){var s=t[r].value,a=n[r].value,u=n[r].unit||"deg";i[r]=r+"("+(s+(a-s)*e)+u+")"}return(i.skewX||"")+(i.skewY||"")},rt=t.scale=function(t,n,e){var i=t.value,r=n.value;return"scale("+(i+(r-i)*e)+")"},st={box:function(t,n){return t in j||(j[t]=function(t,n,e,i,r){t.style[n]=N(e.value,i.value,i.unit,r)}),{value:o(n).v,unit:o(n).u}},tf:function(t,n){if("transform"in j||(j.transform=function(t,n,e,i,r,s){var a="",u="",o="",l="",c="",f=!!(f||s.perspective&&0!==parseInt(s.perspective))&&"perspective("+parseInt(s.perspective)+"px) ";for(var h in i)"translate"===h?u+=nt(e[h],i[h],r):"rotate"===h?o+=et(e[h],i[h],r):"skew"===h?l+=it(e[h],i[h],r):"scale"===h&&(c+=rt(e[h],i[h],r));a=u+o+l+c,t.style[O]=f?f+a:a}),"translate3d"===t){var e=n.split(",");return{translateX:{value:o(e[0]).v,unit:o(e[0]).u},translateY:{value:o(e[1]).v,unit:o(e[1]).u},translateZ:{value:o(e[2]).v,unit:o(e[2]).u}}}if(/^translate(?:[XYZ])$/.test(t))return{value:o(n).v,unit:o(n).u||"px"};if(/^rotate(?:[XYZ])$|skew(?:[XY])$/.test(t))return{value:o(n,!0).v,unit:o(n,!0).u||"deg"};if("translate"===t){var i="string"==typeof n?n.split(","):n,r={};return i instanceof Array?(r.x={value:o(i[0]).v,unit:o(i[0]).u},r.y={value:o(i[1]).v,unit:o(i[1]).u}):(r.x={value:o(i).v,unit:o(i).u},r.y={value:0,unit:"px"}),r}if("rotate"===t){var s={};return s.z={value:o(n,!0).v,unit:o(n,!0).u||"deg"},s}return"scale"===t?{value:parseFloat(n)}:void 0},unl:function(t,n){return!/scroll/.test(t)||t in j?"opacity"===t&&(t in j||(M?j[t]=function(t,n,e,i,r){var s="alpha(opacity=",a=")";t.style.filter=s+100*D(e,i,r)+a}:j[t]=function(t,n,e,i,r){t.style.opacity=D(e,i,r)})):j[t]=function(t,n,e,i,r){var s=s||void 0===t||null===t?C:t;s.scrollTop=D(e,i,r)},parseFloat(n)},cls:function(t,n){return t in j||(j[t]=function(t,n,e,i,r,s){t.style[n]=U(e,i,r,s.keepHex)}),l(n)}},at={},ut={};ut.linear=t.linear=function(t){return t},ut.easingSinusoidalIn=t.easingSinusoidalIn=function(t){return-Math.cos(t*Math.PI/2)+1},ut.easingSinusoidalOut=t.easingSinusoidalOut=function(t){return Math.sin(t*Math.PI/2)},ut.easingSinusoidalInOut=t.easingSinusoidalInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},ut.easingQuadraticIn=t.easingQuadraticIn=function(t){return t*t},ut.easingQuadraticOut=t.easingQuadraticOut=function(t){return t*(2-t)},ut.easingQuadraticInOut=t.easingQuadraticInOut=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},ut.easingCubicIn=t.easingCubicIn=function(t){return t*t*t},ut.easingCubicOut=t.easingCubicOut=function(t){return--t*t*t+1},ut.easingCubicInOut=t.easingCubicInOut=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},ut.easingQuarticIn=t.easingQuarticIn=function(t){return t*t*t*t},ut.easingQuarticOut=t.easingQuarticOut=function(t){return 1- --t*t*t*t},ut.easingQuarticInOut=t.easingQuarticInOut=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},ut.easingQuinticIn=t.easingQuinticIn=function(t){return t*t*t*t*t},ut.easingQuinticOut=t.easingQuinticOut=function(t){return 1+--t*t*t*t*t},ut.easingQuinticInOut=t.easingQuinticInOut=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},ut.easingCircularIn=t.easingCircularIn=function(t){return-(Math.sqrt(1-t*t)-1)},ut.easingCircularOut=t.easingCircularOut=function(t){return Math.sqrt(1-(t-=1)*t)},ut.easingCircularInOut=t.easingCircularInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},ut.easingExponentialIn=t.easingExponentialIn=function(t){return Math.pow(2,10*(t-1))-.001},ut.easingExponentialOut=t.easingExponentialOut=function(t){return 1-Math.pow(2,-10*t)},ut.easingExponentialInOut=t.easingExponentialInOut=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))},ut.easingBackIn=t.easingBackIn=function(t){var n=1.70158;return t*t*((n+1)*t-n)},ut.easingBackOut=t.easingBackOut=function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},ut.easingBackInOut=t.easingBackInOut=function(t){var n=2.5949095;return(t*=2)<1?.5*(t*t*((n+1)*t-n)):.5*((t-=2)*t*((n+1)*t+n)+2)},ut.easingElasticIn=t.easingElasticIn=function(t){var n,e=.1,i=.4;return 0===t?0:1===t?1:(!e||e<1?(e=1,n=i/4):n=i*Math.asin(1/e)/Math.PI*2,-(e*Math.pow(2,10*(t-=1))*Math.sin((t-n)*Math.PI*2/i)))},ut.easingElasticOut=t.easingElasticOut=function(t){var n,e=.1,i=.4;return 0===t?0:1===t?1:(!e||e<1?(e=1,n=i/4):n=i*Math.asin(1/e)/Math.PI*2,e*Math.pow(2,-10*t)*Math.sin((t-n)*Math.PI*2/i)+1)},ut.easingElasticInOut=t.easingElasticInOut=function(t){var n,e=.1,i=.4;return 0===t?0:1===t?1:(!e||e<1?(e=1,n=i/4):n=i*Math.asin(1/e)/Math.PI*2,(t*=2)<1?-.5*(e*Math.pow(2,10*(t-=1))*Math.sin((t-n)*Math.PI*2/i)):e*Math.pow(2,-10*(t-=1))*Math.sin((t-n)*Math.PI*2/i)*.5+1)},ut.easingBounceIn=t.easingBounceIn=function(t){return 1-ut.easingBounceOut(1-t)},ut.easingBounceOut=t.easingBounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},ut.easingBounceInOut=t.easingBounceInOut=function(t){return t<.5?.5*ut.easingBounceIn(2*t):.5*ut.easingBounceOut(2*t-1)+.5};var ot=function(t){this.scrollIn(),W(this._el,this),this._rpr&&this.stack();for(var n in this._vE)this._vSR[n]=this._vS[n];return G(this),this.playing=!0,this.paused=!1,this._sCF=!1,this._sT=t||r.now(),this._sT+=this._dl,this._sCF||(this._sC&&this._sC.call(),this._sCF=!0),i||H(),this},lt=function(){return this.paused&&this.playing&&(this.paused=!1,null!==this._rC&&this._rC.call(),this._sT+=r.now()-this._pST,G(this),i||H()),this},ct=function(i,s,a,u){this._el=i,this._vSR={},this._vS=s,this._vE=a,this._y=u.yoyo||!1,this.playing=!1,this.reversed=!1,this.paused=!1,this._sT=null,this._pST=null,this._hex=u.keepHex||!1,this._rpr=u.rpr||!1,this._dr=u.duration||700,this._r=u.repeat||0,this._rD=u.repeatDelay||0,this._dl=u.delay||0,this._to=u.transformOrigin,this._ppo=u.perspectiveOrigin,this._ppp=u.parentPerspective,this._pppo=u.parentPerspectiveOrigin,this._e=u&&u.easing&&"function"==typeof d(u.easing)?d(u.easing):ut.linear,this._cT=[],this._sCF=!1,this._sC=u.start||null,this._uC=u.update||null,this._cC=u.complete||null,this._pC=u.pause||null,this._rC=u.play||null,this._stC=u.stop||null,this.repeat=this._r,this._ops={},this.start=ct.prototype.start=ot,this.play=ct.prototype.play=this.resume=ct.prototype.resume=lt;for(var o in u)o in this||/delay|duration|repeat|origin|start|stop|update|complete|pause|play|yoyo|easing/i.test(o)||(this._ops[o]=u[o]);this.pause=function(){return!this.paused&&this.playing&&(J(this),this.paused=!0,this._pST=r.now(),null!==this._pC&&this._pC.call()),this},this.stop=function(){return!this.paused&&this.playing&&(J(this),this.playing=!1,this.paused=!1,this.scrollOut(),null!==this._stC&&this._stC.call(),this.stopChainedTweens(),this.close()),this},this.rvs=function(){if(this._y)for(var t in this._vE){var n=this._vSR[t];this._vSR[t]=this._vE[t],this._vE[t]=n,this._vS[t]=this._vSR[t]}},this.chain=function(){return this._cT=arguments,this},this.stopChainedTweens=function(){var t=0,n=this._cT.length;for(t;t<n;t++)this._cT[t].stop()},this.scrollOut=function(){("scroll"in this._vE||"scrollTop"in this._vE)&&(this.removeListeners(),document.body.removeAttribute("data-tweening"))},this.scrollIn=function(){("scroll"in this._vE||"scrollTop"in this._vE)&&(document.body.getAttribute("data-tweening")||(document.body.setAttribute("data-tweening","scroll"),this.addListeners()))},this.addListeners=function(){document.addEventListener(_,c,!1),document.addEventListener(y,c,!1)},this.removeListeners=function(){document.removeEventListener(_,c,!1),document.removeEventListener(y,c,!1)},this.stack=function(){var t=this.prS();this._vS={},this._vS=tt(t,{},this._el)[0];for(var e in this._vS)if("transform"===e&&e in this._vE)for(var i in this._vS[e]){i in this._vE[e]||(this._vE[e][i]={});for(var r in this._vS[e][i])if(void 0!==this._vS[e][i][r].value){r in this._vE[e][i]||(this._vE[e][i][r]={});for(var s in this._vS[e][i][r])s in this._vE[e][i][r]||(this._vE[e][i][r][s]=this._vS[e][i][r][s])}if("value"in this._vS[e][i]&&!("value"in this._vE[e][i]))for(var a in this._vS[e][i])a in this._vE[e][i]||(this._vE[e][i][a]=this._vS[e][i][a])}n.svg&&n.svq(this)},this.prS=function(){var e={},i=this._el,r=this._vS,s=p(i,"transform"),a=["rotate","skew"],u=["X","Y","Z"];for(var o in r)if(X.indexOf(o)!==-1){var l=/(rotate|translate|scale)$/.test(o);if(/translate/.test(o)&&"translate"!==o)e.translate3d=s.translate3d||Z[o];else if(l)e[o]=s[o]||Z[o];else if(!l&&/rotate|skew/.test(o))for(var c=0;c<2;c++)for(var f=0;f<3;f++){var h=a[c]+u[f];X.indexOf(h)!==-1&&h in r&&(e[h]=s[h]||Z[h])}}else if(B.indexOf(o)===-1)if("opacity"===o&&M){var d=v(i,"filter");e.opacity="number"==typeof d?d:Z.opacity}else P.indexOf(o)!==-1?e[o]=v(i,o)||c[o]:e[o]=o in n.prS?n.prS[o](i,o,r[o]):0;else e[o]=null===i||void 0===i?t.pageYOffset||C.scrollTop:i.scrollTop;for(var o in s)X.indexOf(o)===-1||o in r||(e[o]=s[o]||Z[o]);return e},this.close=function(){var t=this;setTimeout(function(){var n=e.indexOf(t);n===e.length-1&&V(),t.repeat>0&&(t._r=t.repeat),t._y&&t.reversed===!0&&(t.rvs(),t.reversed=!1),t.playing=!1},64)}},ft=function(t,n,e){this.tweens=[];var i,r=t.length,s=[];for(i=0;i<r;i++)s[i]=e||{},e.delay=e.delay||0,s[i].delay=i>0?e.delay+(e.offset||0):e.delay,this.tweens.push(z(t[i],n,s[i]))},ht=function(t,n,e,i){this.tweens=[];var r,s=t.length,a=[];for(r=0;r<s;r++)a[r]=i||{},i.delay=i.delay||0,a[r].delay=r>0?i.delay+(i.offset||0):i.delay,this.tweens.push($(t[r],n,e,a[r]))};ft.prototype=ht.prototype={start:function(t){t=t||r.now();var n,e=this.tweens.length;for(n=0;n<e;n++)this.tweens[n].start(t);return this},stop:function(){for(var t=0;t<this.tweens.length;t++)this.tweens[t].stop();return this},pause:function(){for(var t=0;t<this.tweens.length;t++)this.tweens[t].pause();return this},chain:function(){return this.tweens[this.tweens.length-1]._cT=arguments,this},play:function(){for(var t=0;t<this.tweens.length;t++)this.tweens[t].play();return this},resume:function(){return this.play()}};return n={property:a,getPrefix:s,selector:u,pe:d,to:z,fromTo:$,allTo:L,allFromTo:R,Interpolate:{number:D,unit:N,color:U},dom:j,pp:st,prS:at,truD:o,truC:l,rth:f,htr:h,gCS:v,Easing:ut}});
